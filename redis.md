## redis

### 1. 数据结构
#### a. sds
TODO

#### b. 链表
TODO

#### c. 字典
TODO

#### d. 跳跃表
TODO

#### e. 整数集合
TODO

#### f. 压缩列表
TODO

#### g. 对象
TODO
#### h. bitmap
bitmap是redis基于sds实现的一个扩展的数据结构，目前string支持最大的长度为512MB, 则bitmap的最大长度为2^32 = 512MB = 2^29 bytes = 2^32 bits

### 2. redis键空间
在redisDb的数据结构中，dict字段维护了所有的键值对，称为键空间

### 3. 过期时间
redisDb的数据结构中，还有个expires字典，保存了所有键的过期时间。　　　
过期时间的key-value分别是：
key : 指向键空间中，某个键对象的指针
value : long 型的毫秒精度的unix时间戳，即这个键的失效时间

#### 过期键删除策略
判断键是否过期有三种策略：
##### 1. 定时删除
在设置键过期时间时，创建定时器，让定时器在过期时间来临时，立即执行对键的删除操作。　　　
缺点：消耗CPU，影响redis的响应时间和吞吐量

##### 2. 惰性删除
每次从键空间获取键时，都检查是否过期，如果过期则删除；如果不过期，则返回该键。　　　
缺点：对内存非常不友好，造成一些长期不会被访问的内存一直无法释放

##### 3. 定期删除
每隔一段时间，程序就对数据库进行一次检查，删除过期键。　　　
难点：需要在执行时长和频率之间达到一个合理的水平。避免太频繁退化为定时删除，避免频率太低造成内存浪费

##### 4. redis的实际删除策略
使用定期删除 + 惰性删除 这2种策略搭配的方式来删除键

## 常见问题
### 布隆过滤器
布隆过滤器原理：https://www.cnblogs.com/liyulong1982/p/6013002.html
布隆过滤器应用：[使用redis实现分布式布隆过滤器](https://blog.csdn.net/ncuzengxiebo/article/details/82813900)

